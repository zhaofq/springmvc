<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='com.java.spring.dao.UserDao'>
	<insert id="addUser" parameterType="com.java.spring.pojo.User">
		insert into
		TB_USER(ID,EMAIL,IDNUMBER,BIRTHDATE,LASTLOGINDATE,LOGINNAME,MOBILE,NAME,PASSPHRASE,REGISTERDATE,SALT)
		values
		(#{id},#{email},#{IdNumber},#{birthDate},#{lastLoginDate},#{loginName},
		#{mobile},#{name},#{passPhrase},#{registerDate},#{salt})
	</insert>

	<select id="getUserByMobilefromSql" parameterType="String"
		resultType="com.java.spring.pojo.User">
		SELECT
		ID,
		EMAIL,
		IDNUMBER,
		BIRTHDATE,
		LASTLOGINDATE,
		LOGINNAME,
		MOBILE,
		NAME,
		PASSPHRASE,
		REGISTERDATE,
		SALT FROM TB_USER WHERE
		<if test="_parameter!= null">
			MOBILE=#{_parameter}
		</if>
	</select>
	<update id="forgetPassword" parameterType="Stirng">
		update TB_USER
		SET 
		<if test="EMAIL!=null">EMAIL=#{email},</if>
		<if test="IDNUMBER!=null">IDNUMBER=#{IdNumber},</if>
		<if test="BIRTHDATE!=null">BIRTHDATE=#{birthDate},</if>
		<if test="MOBILE!=null">MOBILE=#{mobile},</if>
		<if test="NAME!=null">NAME=#{name},</if>
		<if test="PASSPHRASE!=null">PASSPHRASE=#{passPhrase},</if>
		<if test="REGISTERDATE!=null">REGISTERDATE=#{registerDate},</if>
		<if test="LASTLOGINDATE!=null">LASTLOGINDATE=#{lastLoginDate},</if>
		<if test="MOBILE!=null">MOBILE=#{status}</if>
        where mobile = #{mobile}
	</update>
</mapper>
